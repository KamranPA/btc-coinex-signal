# .github/workflows/diagnostic.yml
name: ğŸ” Ø§Ø¬Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§

on:
  workflow_dispatch:
    inputs:
      start_date:
        description: 'ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ (ÙØ±Ù…Øª: YYYY-MM-DD)'
        required: true
        default: '2025-04-01'
      end_date:
        description: 'ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† (ÙØ±Ù…Øª: YYYY-MM-DD)'
        required: true
        default: '2025-07-01'

jobs:
  diagnostic:
    runs-on: ubuntu-latest
    steps:
      - name: Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯ (Checkout)
        uses: actions/checkout@v3

      - name: Ù†ØµØ¨ Ù¾Ø§ÛŒØªÙˆÙ† 3.10
        uses: actions/setup-python@v4
        with:
          python-version: 3.11

      - name: Ù†ØµØ¨ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§
        run: |
          pip install ccxt pandas requests

      - name: Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ ØªØ§Ø±ÛŒØ® Ø¯Ø± backtest_diagnostic.py
        run: |
          echo "ğŸ“… ØªÙ†Ø¸ÛŒÙ… Ø¨Ø§Ø²Ù‡: ${{ github.event.inputs.start_date }} ØªØ§ ${{ github.event.inputs.end_date }}"
          sed -i "s|START_DATE = '.*'|START_DATE = '${{ github.event.inputs.start_date }}'|g" backtest_diagnostic.py
          sed -i "s|END_DATE = '.*'|END_DATE = '${{ github.event.inputs.end_date }}'|g" backtest_diagnostic.py

      - name: Ø§Ø¬Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµÛŒ
        run: python backtest_diagnostic.py
