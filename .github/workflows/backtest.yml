# .github/workflows/backtest.yml
name: ğŸ“Š Ø¨Ú©â€ŒØªØ³Øª Ø¯Ø³ØªÛŒ Ø¨Ø§ Ø§Ù†ØªØ®Ø§Ø¨ ØªØ§Ø±ÛŒØ®

on:
  workflow_dispatch:
    inputs:
      start_date:
        description: 'ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ (ÙØ±Ù…Øª: YYYY-MM-DD)'
        required: true
        default: '2025-04-01'
      end_date:
        description: 'ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† (ÙØ±Ù…Øª: YYYY-MM-DD)'
        required: true
        default: '2025-05-01'

jobs:
  backtest:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Ú©Ø¯
        uses: actions/checkout@v3

      - name: Ù†ØµØ¨ Ù¾Ø§ÛŒØªÙˆÙ† 3.11
        uses: actions/setup-python@v4
        with:
          python-version: 3.10

      - name: Ù†ØµØ¨ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§
        run: |
          pip install ccxt pandas requests

      - name: Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ ØªØ§Ø±ÛŒØ® Ø¯Ø± backtest.py
        run: |
          echo "ğŸ“… ØªÙ†Ø¸ÛŒÙ… Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ: ${{ github.event.inputs.start_date }} ØªØ§ ${{ github.event.inputs.end_date }}"
          sed -i "s|START_DATE = '.*'|START_DATE = '${{ github.event.inputs.start_date }}'|g" backtest.py
          sed -i "s|END_DATE = '.*'|END_DATE = '${{ github.event.inputs.end_date }}'|g" backtest.py

      - name: Ø§Ø¬Ø±Ø§ÛŒ Ø¨Ú©â€ŒØªØ³Øª
        run: python backtest.py
