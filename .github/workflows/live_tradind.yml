name: ğŸš€ Ø§Ø¬Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ø²Ù†Ø¯Ù‡

on:
  schedule:
    - cron: '*/15 3-20 * * *'  # Ù‡Ø± 15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø² 03:00 ØªØ§ 20:30 UTC
  workflow_dispatch:

jobs:
  run-trading:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    env:
      TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

    steps:
    - name: ğŸ” Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯
      uses: actions/checkout@v4

    - name: ğŸ ØªÙ†Ø¸ÛŒÙ… Ù¾Ø§ÛŒØªÙˆÙ† 3.9
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: ğŸ“¦ Ù†ØµØ¨ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: ğŸ“ Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§
      run: |
        mkdir -p logs results src/logs src/results

    - name: â–¶ï¸ Ø§Ø¬Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…
      run: |
        cd src && python main.py --mode live

    - name: ğŸ“ Ø¢Ù¾Ù„ÙˆØ¯ Ù„Ø§Ú¯â€ŒÙ‡Ø§
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: trading-logs
        path: logs/
        retention-days: 3
